!function(t){t.fn.extend({elastic:function(){var e=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight"];return this.each(function(){function n(t,e){curratedHeight=Math.floor(parseInt(t,10)),a.height()!=curratedHeight&&a.css({height:curratedHeight+"px",overflow:e})}function i(){var t=a.val().replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),e=r.html().replace(/<br>/gi,"<br />");t+"&nbsp;"!=e&&(r.html(t+"&nbsp;"),Math.abs(r.height()+s-a.height())>3&&(t=r.height()+s,t>=o?n(o,"auto"):t<=h?n(h,"hidden"):n(t,"hidden")))}if("textarea"!=this.type)return!1;var a=t(this),r=t("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),s=parseInt(a.css("line-height"),10)||parseInt(a.css("font-size"),"10"),h=parseInt(a.css("height"),10)||3*s,o=parseInt(a.css("max-height"),10)||Number.MAX_VALUE,p=0;for(o<0&&(o=Number.MAX_VALUE),r.appendTo(a.parent()),p=e.length;p--;)r.css(e[p].toString(),a.css(e[p].toString()));a.css({overflow:"hidden"}),a.bind("keyup change cut paste",function(){i()}),a.live("input paste",function(){setTimeout(i,250)}),i()})}})}(jQuery);