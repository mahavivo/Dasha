/*! PhotoSwipe Default UI - 4.1.1 - 2015-12-24
* http://photoswipe.com
* Copyright (c) 2015 Dmitry Semenov; */
(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof exports==="object"){module.exports=b()}else{a.PhotoSwipeUI_Default=b()}}})(this,function(){var a=function(x,P){var B=this;var R=false,u=true,j,b,k,d,D,n,H,U=true,I,c,L,o,s,M,S,O,F={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4000,timeToIdleOutside:1000,loadingIndicatorDelay:1000,addCaptionHTMLFn:function(V,W){if(!V.title){W.children[0].innerHTML="";return false}W.children[0].innerHTML=V.title;return true},closeEl:true,captionEl:true,fullscreenEl:true,zoomEl:true,shareEl:true,counterEl:true,arrowEl:true,preloaderEl:true,tapToClose:false,tapToToggleControls:true,clickToCloseNonZoomable:true,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/"+"?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:true}],getImageURLForShare:function(){return x.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return x.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},g,z;var m=function(aa){if(g){return true}aa=aa||window.event;if(O.timeToIdle&&O.mouseUsed&&!c){l()}var Z=aa.target||aa.srcElement,V,ab=Z.getAttribute("class")||"",X;for(var W=0;W<h.length;W++){V=h[W];if(V.onTap&&ab.indexOf("pswp__"+V.name)>-1){V.onTap();X=true}}if(X){if(aa.stopPropagation){aa.stopPropagation()}g=true;var Y=P.features.isOldAndroid?600:30;z=setTimeout(function(){g=false},Y)}},A=function(){return !x.likelyTouchDevice||O.mouseUsed||screen.width>O.fitControlsWidth},i=function(W,V,X){P[(X?"add":"remove")+"Class"](W,"pswp__"+V)},y=function(){var V=(O.getNumItemsFn()===1);if(V!==S){i(b,"ui--one-slide",V);S=V}},v=function(){i(H,"share-modal--hidden",U)},t=function(){U=!U;if(!U){v();setTimeout(function(){if(!U){P.addClass(H,"pswp__share-modal--fade-in")}},30)}else{P.removeClass(H,"pswp__share-modal--fade-in");setTimeout(function(){if(U){v()}},300)}if(!U){J()}return false},p=function(W){W=W||window.event;var V=W.target||W.srcElement;x.shout("shareLinkClick",W,V);if(!V.href){return false}if(V.hasAttribute("download")){return true}window.open(V.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,"+"location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100));if(!U){t()}return false},J=function(){var aa="",X,Z,ab,W,Y;for(var V=0;V<O.shareButtons.length;V++){X=O.shareButtons[V];ab=O.getImageURLForShare(X);W=O.getPageURLForShare(X);Y=O.getTextForShare(X);Z=X.url.replace("{{url}}",encodeURIComponent(W)).replace("{{image_url}}",encodeURIComponent(ab)).replace("{{raw_image_url}}",ab).replace("{{text}}",encodeURIComponent(Y));aa+='<a href="'+Z+'" target="_blank" '+'class="pswp__share--'+X.id+'"'+(X.download?"download":"")+">"+X.label+"</a>";if(O.parseShareButtonOut){aa=O.parseShareButtonOut(X,aa)}}H.children[0].innerHTML=aa;H.children[0].onclick=p},C=function(W){for(var V=0;V<O.closeElClasses.length;V++){if(P.hasClass(W,"pswp__"+O.closeElClasses[V])){return true}}},K,e,T=0,l=function(){clearTimeout(e);T=0;if(c){B.setIdle(false)}},w=function(V){V=V?V:window.event;var W=V.relatedTarget||V.toElement;if(!W||W.nodeName==="HTML"){clearTimeout(e);e=setTimeout(function(){B.setIdle(true)},O.timeToIdleOutside)}},r=function(){if(O.fullscreenEl&&!P.features.isOldAndroid){if(!j){j=B.getFullscreenAPI()}if(j){P.bind(document,j.eventK,B.updateFullscreen);B.updateFullscreen();P.addClass(x.template,"pswp--supports-fs")}else{P.removeClass(x.template,"pswp--supports-fs")}}},q=function(){if(O.preloaderEl){f(true);L("beforeChange",function(){clearTimeout(M);M=setTimeout(function(){if(x.currItem&&x.currItem.loading){if(!x.allowProgressiveImg()||(x.currItem.img&&!x.currItem.img.naturalWidth)){f(false)}}else{f(true)}},O.loadingIndicatorDelay)});L("imageLoadComplete",function(V,W){if(x.currItem===W){f(true)}})}},f=function(V){if(s!==V){i(o,"preloader--active",!V);s=V}},G=function(X){var Y=X.vGap;if(A()){var V=O.barsSize;if(O.captionEl&&V.bottom==="auto"){if(!d){d=P.createEl("pswp__caption pswp__caption--fake");d.appendChild(P.createEl("pswp__caption__center"));b.insertBefore(d,k);P.addClass(b,"pswp__ui--fit")}if(O.addCaptionHTMLFn(X,d,true)){var W=d.clientHeight;Y.bottom=parseInt(W,10)||44}else{Y.bottom=V.top}}else{Y.bottom=V.bottom==="auto"?0:V.bottom}Y.top=V.top}else{Y.top=Y.bottom=0}},E=function(){if(O.timeToIdle){L("mouseUsed",function(){P.bind(document,"mousemove",l);P.bind(document,"mouseout",w);K=setInterval(function(){T++;if(T===2){B.setIdle(true)}},O.timeToIdle/2)})}},N=function(){L("onVerticalDrag",function(W){if(u&&W<0.95){B.hideControls()
}else{if(!u&&W>=0.95){B.showControls()}}});var V;L("onPinchClose",function(W){if(u&&W<0.9){B.hideControls();V=true}else{if(V&&!u&&W>0.9){B.showControls()}}});L("zoomGestureEnded",function(){V=false;if(V&&!u){B.showControls()}})};var h=[{name:"caption",option:"captionEl",onInit:function(V){k=V}},{name:"share-modal",option:"shareEl",onInit:function(V){H=V},onTap:function(){t()}},{name:"button--share",option:"shareEl",onInit:function(V){n=V},onTap:function(){t()}},{name:"button--zoom",option:"zoomEl",onTap:x.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(V){D=V}},{name:"button--close",option:"closeEl",onTap:x.close},{name:"button--arrow--left",option:"arrowEl",onTap:x.prev},{name:"button--arrow--right",option:"arrowEl",onTap:x.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){if(j.isFullscreen()){j.exit()}else{j.enter()}}},{name:"preloader",option:"preloaderEl",onInit:function(V){o=V}}];var Q=function(){var Y,X,W;var V=function(ad){if(!ad){return}var ab=ad.length;for(var ac=0;ac<ab;ac++){Y=ad[ac];X=Y.className;for(var aa=0;aa<h.length;aa++){W=h[aa];if(X.indexOf("pswp__"+W.name)>-1){if(O[W.option]){P.removeClass(Y,"pswp__element--disabled");if(W.onInit){W.onInit(Y)}}else{P.addClass(Y,"pswp__element--disabled")}}}}};V(b.children);var Z=P.getChildByClass(b,"pswp__top-bar");if(Z){V(Z.children)}};B.init=function(){P.extend(x.options,F,true);O=x.options;b=P.getChildByClass(x.scrollWrap,"pswp__ui");L=x.listen;N();L("beforeChange",B.update);L("doubleTap",function(V){var W=x.currItem.initialZoomLevel;if(O.handleDoubleTapZoom){O.handleDoubleTapZoom(V);return}if(x.getZoomLevel()!==W){x.zoomTo(W,V,333)}else{x.zoomTo(O.getDoubleTapZoom(false,x.currItem),V,333)}});L("preventDragEvent",function(Y,V,X){var W=Y.target||Y.srcElement;if(W&&W.getAttribute("class")&&Y.type.indexOf("mouse")>-1&&(W.getAttribute("class").indexOf("__caption")>0||(/(SMALL|STRONG|EM)/i).test(W.tagName))){X.prevent=false}});L("bindEvents",function(){P.bind(b,"pswpTap click",m);P.bind(x.scrollWrap,"pswpTap",B.onGlobalTap);if(!x.likelyTouchDevice){P.bind(x.scrollWrap,"mouseover",B.onMouseOver)}});L("unbindEvents",function(){if(!U){t()}if(K){clearInterval(K)}P.unbind(document,"mouseout",w);P.unbind(document,"mousemove",l);P.unbind(b,"pswpTap click",m);P.unbind(x.scrollWrap,"pswpTap",B.onGlobalTap);P.unbind(x.scrollWrap,"mouseover",B.onMouseOver);if(j){P.unbind(document,j.eventK,B.updateFullscreen);if(j.isFullscreen()){O.hideAnimationDuration=0;j.exit()}j=null}});L("destroy",function(){if(O.captionEl){if(d){b.removeChild(d)}P.removeClass(k,"pswp__caption--empty")}if(H){H.children[0].onclick=null}P.removeClass(b,"pswp__ui--over-close");P.addClass(b,"pswp__ui--hidden");B.setIdle(false)});if(!O.showAnimationDuration){P.removeClass(b,"pswp__ui--hidden")}L("initialZoomIn",function(){if(O.showAnimationDuration){P.removeClass(b,"pswp__ui--hidden")}});L("initialZoomOut",function(){P.addClass(b,"pswp__ui--hidden")});L("parseVerticalMargin",G);Q();if(O.shareEl&&n&&H){U=true}y();E();r();q()};B.setIdle=function(V){c=V;i(b,"ui--idle",V)};B.update=function(){if(u&&x.currItem){B.updateIndexIndicator();if(O.captionEl){O.addCaptionHTMLFn(x.currItem,k);i(k,"caption--empty",!x.currItem.title)}R=true}else{R=false}if(!U){t()}y()};B.updateFullscreen=function(V){if(V){setTimeout(function(){x.setScrollOffset(0,P.getScrollY())},50)}P[(j.isFullscreen()?"add":"remove")+"Class"](x.template,"pswp--fs")};B.updateIndexIndicator=function(){if(O.counterEl){D.innerHTML=(x.getCurrentIndex()+1)+O.indexIndicatorSep+O.getNumItemsFn()}};B.onGlobalTap=function(W){W=W||window.event;var V=W.target||W.srcElement;if(g){return}if(W.detail&&W.detail.pointerType==="mouse"){if(C(V)){x.close();return}if(P.hasClass(V,"pswp__img")){if(x.getZoomLevel()===1&&x.getZoomLevel()<=x.currItem.fitRatio){if(O.clickToCloseNonZoomable){x.close()}}else{x.toggleDesktopZoom(W.detail.releasePoint)}}}else{if(O.tapToToggleControls){if(u){B.hideControls()}else{B.showControls()}}if(O.tapToClose&&(P.hasClass(V,"pswp__img")||C(V))){x.close();return}}};B.onMouseOver=function(W){W=W||window.event;var V=W.target||W.srcElement;i(b,"ui--over-close",C(V))};B.hideControls=function(){P.addClass(b,"pswp__ui--hidden");u=false};B.showControls=function(){u=true;if(!R){B.update()}P.removeClass(b,"pswp__ui--hidden")};B.supportsFullscreen=function(){var V=document;return !!(V.exitFullscreen||V.mozCancelFullScreen||V.webkitExitFullscreen||V.msExitFullscreen)};B.getFullscreenAPI=function(){var X=document.documentElement,V,W="fullscreenchange";if(X.requestFullscreen){V={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:W}}else{if(X.mozRequestFullScreen){V={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+W}}else{if(X.webkitRequestFullscreen){V={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+W}}else{if(X.msRequestFullscreen){V={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}
}}}}if(V){V.enter=function(){I=O.closeOnScroll;O.closeOnScroll=false;if(this.enterK==="webkitRequestFullscreen"){x.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)}else{return x.template[this.enterK]()}};V.exit=function(){O.closeOnScroll=I;return document[this.exitK]()};V.isFullscreen=function(){return document[this.elementK]}}return V}};return a});
